<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Control Panel - KitKat Universe</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <script>
        // Check authentication before loading admin panel
        if (sessionStorage.getItem('adminAuthenticated') !== 'true') {
            window.location.href = 'login.html';
        }
    </script>
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>KitKat Universe</h2>
                <p>Admin Control Panel</p>
            </div>

            <div class="user-profile">
                <div class="profile-avatar">A</div>
                <div class="profile-info">
                    <h3 id="displayUsername">Ahmed Khamlich</h3>
                    <button class="sign-out-btn" onclick="signOut()">Sign Out</button>
                </div>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-btn active" onclick="switchTab('dashboard')">
                    <span>üìä</span> Dashboard
                </button>
                <button class="nav-btn" onclick="switchTab('links')">
                    <span>üîó</span> Links
                </button>
                <button class="nav-btn" onclick="switchTab('settings')">
                    <span>‚öôÔ∏è</span> Settings
                </button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <div class="admin-header">
                <h1>Dashboard</h1>
                <button class="preview-btn" onclick="previewSite()">üëÅÔ∏è Preview Viewer Site</button>
            </div>

            <!-- Dashboard Tab -->
            <div id="dashboard-tab" class="tab-content active">
                <div class="info-banner">
                    <span class="info-icon">‚ÑπÔ∏è</span>
                    <p>Your viewer site is live at the <strong>Home page</strong>. Any changes you make here will instantly appear for all visitors!</p>
                </div>

                <div class="tabs-container">
                    <button class="tab-button active" onclick="switchSubTab('links', this)">üîó Links</button>
                    <button class="tab-button" onclick="switchSubTab('settings', this)">‚öôÔ∏è Settings</button>
                </div>

                <!-- Links Section -->
                <div id="links-subtab" class="subtab-content active">
                    <div class="section-header">
                        <h2>Manage Links</h2>
                        <button class="add-btn" onclick="showAddLinkForm()">+ Add New Link</button>
                    </div>

                    <div id="links-list" class="links-list">
                        <!-- Links will be added here -->
                    </div>
                </div>

                <!-- Settings Section -->
                <div id="settings-subtab" class="subtab-content">
                    <div class="section-header">
                        <h2>Site Settings</h2>
                    </div>

                    <form id="settings-form" class="settings-form">
                        <div class="form-group">
                            <label>Admin Panel Name</label>
                            <input type="text" id="adminPanelName" placeholder="KitKat Universe">
                        </div>

                        <div class="form-group">
                            <label>Username</label>
                            <input type="text" id="username" placeholder="tobi">
                        </div>

                        <div class="form-group">
                            <label>Commission Status</label>
                            <select id="commissionStatus">
                                <option value="Open">Open</option>
                                <option value="Closed">Closed</option>
                                <option value="On Hold">On Hold</option>
                            </select>
                            <small>This updates the status displayed on your site</small>
                        </div>

                        <div class="form-group">
                            <label>Tagline</label>
                            <input type="text" id="tagline" placeholder="Your tagline here">
                        </div>

                        <div class="form-group">
                            <label>About Section</label>
                            <textarea id="aboutSection" placeholder="About your site..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>Services Section</label>
                            <textarea id="servicesSection" placeholder="Describe your services..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>Profile Picture (URL)</label>
                            <input type="url" id="profilePicture" placeholder="https://example.com/image.jpg">
                            <small>Upload image to a service like imgur.com and paste the URL here</small>
                        </div>

                        <div class="form-group">
                            <label>Banner Image (URL)</label>
                            <input type="url" id="bannerImage" placeholder="https://example.com/banner.jpg">
                        </div>

                        <div class="form-group">
                            <label>Background Music (URL)</label>
                            <input type="url" id="backgroundMusic" placeholder="https://example.com/music.mp3">
                            <small>Auto-plays when visitor arrives</small>
                        </div>

                        <div class="form-group">
                            <label>Contact Email</label>
                            <input type="email" id="contactEmail" placeholder="contact@example.com">
                        </div>

                        <div class="form-group">
                            <label>Contact Phone</label>
                            <input type="tel" id="contactPhone" placeholder="+1 (555) 123-4567">
                        </div>

                        <div class="form-group">
                            <label>Side Stickers (Emoji or URLs, comma separated)</label>
                            <input type="text" id="sideStickers" placeholder="üòÄ üòä ‚≠ê or https://example.com/sticker1.png,https://example.com/sticker2.png">
                            <small>Add decorative stickers to the sides of the page</small>
                        </div>

                        <div class="form-group">
                            <label>Contact Us</label>
                            <textarea id="contactUs" placeholder="Contact information, email, phone, address, etc..."></textarea>
                        </div>

                        <!-- Color Settings -->
                        <div class="color-settings">
                            <h3>Color Settings</h3>
                            
                            <div class="color-group">
                                <label>Primary Color</label>
                                <div class="color-input-wrapper">
                                    <input type="color" id="primaryColor" value="#a855f7">
                                    <input type="text" id="primaryColorHex" value="#a855f7" readonly>
                                </div>
                            </div>

                            <div class="color-group">
                                <label>Secondary Color</label>
                                <div class="color-input-wrapper">
                                    <input type="color" id="secondaryColor" value="#d946ef">
                                    <input type="text" id="secondaryColorHex" value="#d946ef" readonly>
                                </div>
                            </div>

                            <div class="color-group">
                                <label>Footer Background Color</label>
                                <div class="color-input-wrapper">
                                    <input type="color" id="footerColor" value="#000000">
                                    <input type="text" id="footerColorHex" value="#000000" readonly>
                                </div>
                            </div>

                            <p class="color-hint">You can use hex colors (#000000) or rgba (rgba(0, 0, 0, 0.1))</p>

                            <button type="button" class="reset-colors-btn" onclick="resetColors()">‚Üª Reset Colors to Default</button>
                        </div>

                        <div class="form-group">
                            <label>Font Family</label>
                            <select id="fontFamily">
                                <option value="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Inter (Default)</option>
                                <option value="'Arial', sans-serif">Arial</option>
                                <option value="'Courier New', monospace">Courier New</option>
                                <option value="'Georgia', serif">Georgia</option>
                            </select>
                        </div>

                        <button type="submit" class="save-settings-btn">üíæ Save Settings</button>
                    </form>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings-tab" class="tab-content">
                <div class="section-header">
                    <h2>General Settings</h2>
                </div>
                <p>Settings managed in Dashboard ‚Üí Settings section</p>
            </div>

            <!-- Links Tab -->
            <div id="links-tab" class="tab-content">
                <div class="section-header">
                    <h2>Manage Links</h2>
                    <button class="add-btn" onclick="showAddLinkForm()">+ Add New Link</button>
                </div>
                <div id="links-list-main" class="links-list">
                    <!-- Links will be added here -->
                </div>
            </div>
        </main>
    </div>

    <!-- Add Link Modal -->
    <div id="linkModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Link</h2>
                <button class="close-btn" onclick="closeLinkModal()">&times;</button>
            </div>
            <form id="linkForm" class="link-form">
                <div class="form-group">
                    <label>Link Title</label>
                    <input type="text" id="linkTitle" placeholder="e.g., youtube" required>
                </div>
                <div class="form-group">
                    <label>URL</label>
                    <input type="url" id="linkUrl" placeholder="https://example.com" required>
                </div>
                <div class="form-group">
                    <label>Icon (Upload Image or Emoji)</label>
                    <div class="icon-upload-wrapper">
                        <input type="file" id="linkIconFile" accept="image/*" style="display:none;">
                        <button type="button" class="upload-icon-btn" onclick="document.getElementById('linkIconFile').click()">
                            üì§ Upload Icon Image
                        </button>
                        <div id="iconPreview" class="icon-preview"></div>
                    </div>
                    <p style="font-size: 0.85rem; color: rgba(255,255,255,0.6); margin-top: 10px;">
                        Or use emoji/text instead:
                    </p>
                    <input type="text" id="linkIcon" placeholder="üì∫ or youtube" value="üîó">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn-primary">Add Link</button>
                    <button type="button" class="btn-secondary" onclick="closeLinkModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script src="admin.js"></script>
</body>
</html>
